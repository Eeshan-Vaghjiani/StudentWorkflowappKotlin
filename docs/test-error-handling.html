<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Error Handling - Account Deletion</title>
    <link rel="stylesheet" href="assets/css/common.css">
    <link rel="stylesheet" href="assets/css/delete.css">
    <style>
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        .test-button {
            margin: 10px 5px;
            padding: 10px 20px;
            background: #1976d2;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .test-button:hover {
            background: #1565c0;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Error Handling Test Page</h1>
        </div>
    </header>

    <main class="container">
        <div class="test-section">
            <h2>Test Error Messages</h2>
            <p>Click buttons below to test different error message types:</p>
            
            <button class="test-button" onclick="testSuccessMessage()">Test Success Message</button>
            <button class="test-button" onclick="testErrorMessage()">Test Error Message</button>
            <button class="test-button" onclick="testWarningMessage()">Test Warning Message</button>
            <button class="test-button" onclick="testInfoMessage()">Test Info Message</button>
            <button class="test-button" onclick="testNetworkError()">Test Network Error with Retry</button>
            <button class="test-button" onclick="testAuthError()">Test Auth Error</button>
            <button class="test-button" onclick="testDeletionError()">Test Deletion Error</button>
        </div>

        <div id="statusMessage" class="status-message hidden" role="status" aria-live="polite"></div>
    </main>

    <script type="module">
        import { 
            showMessage, 
            handleAuthError, 
            handleDeletionError 
        } from './assets/js/delete-account.js';

        // Make functions available globally for onclick handlers
        window.testSuccessMessage = function() {
            showMessage('Account deleted successfully! All your data has been removed.', 'success');
        };

        window.testErrorMessage = function() {
            showMessage('Failed to delete account. Please try again or contact support.', 'error');
        };

        window.testWarningMessage = function() {
            showMessage('This action cannot be undone. Please confirm before proceeding.', 'warning');
        };

        window.testInfoMessage = function() {
            showMessage('Deleting your data from Firestore... Please wait.', 'info');
        };

        window.testNetworkError = function() {
            showMessage('Network error occurred while processing your request.', 'error', true);
        };

        window.testAuthError = function() {
            const errorInfo = handleAuthError('auth/network-request-failed');
            showMessage(errorInfo.message, 'error', errorInfo.isNetworkError);
        };

        window.testDeletionError = function() {
            const errorInfo = handleDeletionError('auth/network-request-failed');
            showMessage(errorInfo.message, 'error', errorInfo.isNetworkError);
        };

        console.log('Test page loaded successfully');
    </script>
</body>
</html>
